apiVersion: v1
kind: Secret
metadata:
  name: objectstorage-keyfile
  labels:
    heritage: drycc
  annotations:
    drycc.cc/objectstorage: "{{ .Values.global.storage }}"
type: Opaque
data:
{{ if eq .Values.global.storage "gcs"}}
  accesskey: {{.Values.gcs.accesskey | b64enc }}
  secretkey: {{ .Values.gcs.secretkey | b64enc }}
  key.json: {{.Values.gcs.keyJson}}
  projectid: {{ .Values.gcs.projectid | b64enc }}
  builder-bucket: {{.Values.gcs.builderBucket | b64enc }}
  registry-bucket: {{.Values.gcs.registryBucket | b64enc }}
  database-bucket: {{.Values.gcs.databaseBucket | b64enc }}
{{ else if eq .Values.global.storage "azure"}}
  accesskey: {{.Values.azure.accesskey | b64enc }}
  secretkey: {{ .Values.azure.secretkey | b64enc }}
  endpoint: {{ .Values.azure.endpoint | b64enc }}
  builder-bucket: {{ .Values.azure.builderBucket | b64enc }}
  registry-bucket: {{ .Values.azure.registryBucket | b64enc }}
  database-bucket: {{ .Values.azure.databaseBucket | b64enc }}
{{ else if eq .Values.global.storage "s3"}}
  accesskey: {{ .Values.s3.accesskey | b64enc }}
  secretkey: {{ .Values.s3.secretkey | b64enc }}
  endpoint: {{ .Values.s3.endpoint | b64enc }}
  builder-bucket: {{ .Values.s3.builderBucket | b64enc }}
  registry-bucket: {{.Values.s3.registryBucket | b64enc }}
  database-bucket: {{.Values.s3.databaseBucket | b64enc }}
{{ else if eq .Values.global.storage "oss"}}
  accesskey: {{ .Values.oss.accesskey | b64enc }}
  secretkey: {{ .Values.oss.secretkey | b64enc }}
  endpoint: {{ .Values.oss.endpoint | b64enc }}
  builder-bucket: {{ .Values.oss.builderBucket | b64enc }}
  registry-bucket: {{.Values.oss.registryBucket | b64enc }}
  database-bucket: {{.Values.oss.databaseBucket | b64enc }}
{{else if eq .Values.global.storage "minio"}}
  accesskey: {{ .Values.minio.accesskey | b64enc }}
  secretkey: {{ .Values.minio.secretkey | b64enc }}
  builder-bucket: {{ .Values.minio.builderBucket | b64enc }}
  registry-bucket: {{ .Values.minio.registryBucket | b64enc }}
  database-bucket: {{ .Values.minio.databaseBucket | b64enc }}
{{ end }}
